{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.country": {
      "name": "country",
      "schema": "",
      "columns": {
        "iso2": {
          "name": "iso2",
          "type": "char(2)",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.learner": {
      "name": "learner",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "student_number": {
          "name": "student_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "dob": {
          "name": "dob",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "citext",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "citizenship_code": {
          "name": "citizenship_code",
          "type": "char(2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "ix_learner_name": {
          "name": "ix_learner_name",
          "columns": [
            {
              "expression": "last_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "first_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "uq_learner_identity": {
          "name": "uq_learner_identity",
          "columns": [
            {
              "expression": "first_name",
              "asc": true,
              "nulls": "last",
              "opclass": "bpchar_ops",
              "isExpression": false
            },
            {
              "expression": "last_name",
              "asc": true,
              "nulls": "last",
              "opclass": "bpchar_ops",
              "isExpression": false
            },
            {
              "expression": "dob",
              "asc": true,
              "nulls": "last",
              "opclass": "bpchar_ops",
              "isExpression": false
            },
            {
              "expression": "citizenship_code",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "learner_citizenship_code_fkey": {
          "name": "learner_citizenship_code_fkey",
          "tableFrom": "learner",
          "tableTo": "country",
          "schemaTo": "public",
          "columnsFrom": [
            "citizenship_code"
          ],
          "columnsTo": [
            "iso2"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "learner_student_number_key": {
          "columns": [
            "student_number"
          ],
          "nullsNotDistinct": false,
          "name": "learner_student_number_key"
        },
        "learner_email_key": {
          "columns": [
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "learner_email_key"
        }
      },
      "checkConstraints": {
        "learner_dob_check": {
          "name": "learner_dob_check",
          "value": "dob <= CURRENT_DATE"
        },
        "learner_first_name_check": {
          "name": "learner_first_name_check",
          "value": "length(TRIM(BOTH FROM first_name)) > 0"
        },
        "learner_last_name_check": {
          "name": "learner_last_name_check",
          "value": "length(TRIM(BOTH FROM last_name)) > 0"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.course": {
      "name": "course",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "course_code_key": {
          "columns": [
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "course_code_key"
        }
      },
      "checkConstraints": {
        "course_check": {
          "name": "course_check",
          "value": "end_date >= start_date"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.booking": {
      "name": "booking",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "learner_id": {
          "name": "learner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "course_id": {
          "name": "course_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sale_date": {
          "name": "sale_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "placement_score": {
          "name": "placement_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "deposit_paid": {
          "name": "deposit_paid",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "course_fee": {
          "name": "course_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "accommodation_fee": {
          "name": "accommodation_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "transfer_fee": {
          "name": "transfer_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "exam_fee": {
          "name": "exam_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "registration_fee": {
          "name": "registration_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "learner_prot_fee": {
          "name": "learner_prot_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "medical_ins_fee": {
          "name": "medical_ins_fee",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "total_booking": {
          "name": "total_booking",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(((((((deposit_paid + course_fee) + accommodation_fee) + transfer_fee) + exam_fee) + registration_fee) + learner_prot_fee) + medical_ins_fee)",
            "type": "stored"
          }
        },
        "total_due": {
          "name": "total_due",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "(((((((course_fee + accommodation_fee) + transfer_fee) + exam_fee) + registration_fee) + learner_prot_fee) + medical_ins_fee) - deposit_paid)",
            "type": "stored"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "ix_booking_course": {
          "name": "ix_booking_course",
          "columns": [
            {
              "expression": "course_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_booking_learner": {
          "name": "ix_booking_learner",
          "columns": [
            {
              "expression": "learner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_booking_sale_date": {
          "name": "ix_booking_sale_date",
          "columns": [
            {
              "expression": "sale_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "booking_course_id_fkey": {
          "name": "booking_course_id_fkey",
          "tableFrom": "booking",
          "tableTo": "course",
          "schemaTo": "public",
          "columnsFrom": [
            "course_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "booking_learner_id_fkey": {
          "name": "booking_learner_id_fkey",
          "tableFrom": "booking",
          "tableTo": "learner",
          "schemaTo": "public",
          "columnsFrom": [
            "learner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.currency": {
      "name": "currency",
      "schema": "",
      "columns": {
        "code": {
          "name": "code",
          "type": "char(3)",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "booking_id": {
          "name": "booking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency_code": {
          "name": "currency_code",
          "type": "char(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'EUR'"
        },
        "method": {
          "name": "method",
          "type": "payment_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "paid_on": {
          "name": "paid_on",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        },
        "reference": {
          "name": "reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "ix_payments_booking": {
          "name": "ix_payments_booking",
          "columns": [
            {
              "expression": "booking_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_payments_date": {
          "name": "ix_payments_date",
          "columns": [
            {
              "expression": "paid_on",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payments_booking_id_fkey": {
          "name": "payments_booking_id_fkey",
          "tableFrom": "payments",
          "tableTo": "booking",
          "schemaTo": "public",
          "columnsFrom": [
            "booking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "payments_currency_code_fkey": {
          "name": "payments_currency_code_fkey",
          "tableFrom": "payments",
          "tableTo": "currency",
          "schemaTo": "public",
          "columnsFrom": [
            "currency_code"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "payments_amount_check": {
          "name": "payments_amount_check",
          "value": "amount > (0)::numeric"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.programmes": {
      "name": "programmes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "levels": {
          "name": "levels",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[\"A1\",\"A2\",\"B1\",\"B2\",\"C1\",\"C2\"]'::jsonb"
        },
        "duration_weeks": {
          "name": "duration_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 12
        },
        "hours_per_week": {
          "name": "hours_per_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 15
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_programmes_deleted": {
          "name": "idx_programmes_deleted",
          "columns": [
            {
              "expression": "deleted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_programmes_status": {
          "name": "idx_programmes_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_programmes_tenant": {
          "name": "idx_programmes_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "programmes_tenant_id_fkey": {
          "name": "programmes_tenant_id_fkey",
          "tableFrom": "programmes",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uk_programmes_tenant_code": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "uk_programmes_tenant_code"
        }
      },
      "checkConstraints": {},
      "policies": {
        "programmes_delete_admin": {
          "name": "programmes_delete_admin",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ],
          "using": "((tenant_id = (current_setting('app.current_tenant_id'::text))::uuid) AND (current_setting('app.current_user_role'::text) = ANY (ARRAY['admin'::text, 'super_admin'::text])))"
        },
        "programmes_insert_admin": {
          "name": "programmes_insert_admin",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "programmes_select_tenant": {
          "name": "programmes_select_tenant",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "programmes_update_admin": {
          "name": "programmes_update_admin",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.accommodation": {
      "name": "accommodation",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "booking_id": {
          "name": "booking_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "cost": {
          "name": "cost",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency_code": {
          "name": "currency_code",
          "type": "char(3)",
          "primaryKey": false,
          "notNull": true,
          "default": "'EUR'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "ix_accommodation_booking": {
          "name": "ix_accommodation_booking",
          "columns": [
            {
              "expression": "booking_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_accommodation_window": {
          "name": "ix_accommodation_window",
          "columns": [
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "accommodation_booking_id_fkey": {
          "name": "accommodation_booking_id_fkey",
          "tableFrom": "accommodation",
          "tableTo": "booking",
          "schemaTo": "public",
          "columnsFrom": [
            "booking_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "accommodation_currency_code_fkey": {
          "name": "accommodation_currency_code_fkey",
          "tableFrom": "accommodation",
          "tableTo": "currency",
          "schemaTo": "public",
          "columnsFrom": [
            "currency_code"
          ],
          "columnsTo": [
            "code"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "accommodation_check": {
          "name": "accommodation_check",
          "value": "end_date >= start_date"
        },
        "accommodation_cost_check": {
          "name": "accommodation_cost_check",
          "value": "cost >= (0)::numeric"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.attendance_day": {
      "name": "attendance_day",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "course_id": {
          "name": "course_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_date": {
          "name": "class_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ix_att_day_course": {
          "name": "ix_att_day_course",
          "columns": [
            {
              "expression": "course_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_att_day_date": {
          "name": "ix_att_day_date",
          "columns": [
            {
              "expression": "class_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_day_course_id_fkey": {
          "name": "attendance_day_course_id_fkey",
          "tableFrom": "attendance_day",
          "tableTo": "course",
          "schemaTo": "public",
          "columnsFrom": [
            "course_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "attendance_day_course_id_class_date_key": {
          "columns": [
            "course_id",
            "class_date"
          ],
          "nullsNotDistinct": false,
          "name": "attendance_day_course_id_class_date_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.attendance_mark": {
      "name": "attendance_mark",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "attendance_day_id": {
          "name": "attendance_day_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "learner_id": {
          "name": "learner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "attendance_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_att_mark_day": {
          "name": "ix_att_mark_day",
          "columns": [
            {
              "expression": "attendance_day_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_att_mark_student": {
          "name": "ix_att_mark_student",
          "columns": [
            {
              "expression": "learner_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_mark_attendance_day_id_fkey": {
          "name": "attendance_mark_attendance_day_id_fkey",
          "tableFrom": "attendance_mark",
          "tableTo": "attendance_day",
          "schemaTo": "public",
          "columnsFrom": [
            "attendance_day_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "attendance_mark_learner_id_fkey": {
          "name": "attendance_mark_learner_id_fkey",
          "tableFrom": "attendance_mark",
          "tableTo": "learner",
          "schemaTo": "public",
          "columnsFrom": [
            "learner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "attendance_mark_attendance_day_id_learner_id_key": {
          "columns": [
            "attendance_day_id",
            "learner_id"
          ],
          "nullsNotDistinct": false,
          "name": "attendance_mark_attendance_day_id_learner_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": true
    },
    "public.courses": {
      "name": "courses",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "programme_id": {
          "name": "programme_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cefr_level": {
          "name": "cefr_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "syllabus_url": {
          "name": "syllabus_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "syllabus_version": {
          "name": "syllabus_version",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "hours_per_week": {
          "name": "hours_per_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 15
        },
        "duration_weeks": {
          "name": "duration_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 12
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_courses_cefr": {
          "name": "idx_courses_cefr",
          "columns": [
            {
              "expression": "cefr_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_courses_deleted": {
          "name": "idx_courses_deleted",
          "columns": [
            {
              "expression": "deleted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(deleted_at IS NULL)",
          "with": {}
        },
        "idx_courses_programme": {
          "name": "idx_courses_programme",
          "columns": [
            {
              "expression": "programme_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_courses_status": {
          "name": "idx_courses_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_courses_tenant": {
          "name": "idx_courses_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "courses_programme_id_fkey": {
          "name": "courses_programme_id_fkey",
          "tableFrom": "courses",
          "tableTo": "programmes",
          "schemaTo": "public",
          "columnsFrom": [
            "programme_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "courses_tenant_id_fkey": {
          "name": "courses_tenant_id_fkey",
          "tableFrom": "courses",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uk_courses_tenant_code": {
          "columns": [
            "tenant_id",
            "code"
          ],
          "nullsNotDistinct": false,
          "name": "uk_courses_tenant_code"
        }
      },
      "checkConstraints": {
        "check_cefr_level": {
          "name": "check_cefr_level",
          "value": "(cefr_level)::text = ANY ((ARRAY['A1'::character varying, 'A2'::character varying, 'B1'::character varying, 'B2'::character varying, 'C1'::character varying, 'C2'::character varying])::text[])"
        }
      },
      "policies": {
        "courses_delete_admin": {
          "name": "courses_delete_admin",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ],
          "using": "((tenant_id = (current_setting('app.current_tenant_id'::text))::uuid) AND (current_setting('app.current_user_role'::text) = ANY (ARRAY['admin'::text, 'super_admin'::text])))"
        },
        "courses_insert_admin": {
          "name": "courses_insert_admin",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "courses_select_tenant": {
          "name": "courses_select_tenant",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "courses_update_admin": {
          "name": "courses_update_admin",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.admin_user": {
      "name": "admin_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "supabase_uid": {
          "name": "supabase_uid",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "citext",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_TIMESTAMP"
        }
      },
      "indexes": {
        "ix_admin_email": {
          "name": "ix_admin_email",
          "columns": [
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "citext_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "admin_user_supabase_uid_key": {
          "columns": [
            "supabase_uid"
          ],
          "nullsNotDistinct": false,
          "name": "admin_user_supabase_uid_key"
        },
        "admin_user_email_key": {
          "columns": [
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "admin_user_email_key"
        }
      },
      "checkConstraints": {
        "admin_user_role_check": {
          "name": "admin_user_role_check",
          "value": "role = ANY (ARRAY['admin'::text, 'super_admin'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": true
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'student'"
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "last_login": {
          "name": "last_login",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "current_level": {
          "name": "current_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "initial_level": {
          "name": "initial_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "level_status": {
          "name": "level_status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_type": {
          "name": "visa_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_expiry": {
          "name": "visa_expiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_users_current_level": {
          "name": "idx_users_current_level",
          "columns": [
            {
              "expression": "current_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((role)::text = 'student'::text)",
          "with": {}
        },
        "idx_users_level_status": {
          "name": "idx_users_level_status",
          "columns": [
            {
              "expression": "level_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((role)::text = 'student'::text)",
          "with": {}
        },
        "idx_users_role": {
          "name": "idx_users_role",
          "columns": [
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_tenant": {
          "name": "idx_users_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_tenant_email": {
          "name": "idx_users_tenant_email",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "email",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_visa_expiry": {
          "name": "idx_users_visa_expiry",
          "columns": [
            {
              "expression": "visa_expiry",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(((role)::text = 'student'::text) AND (visa_expiry IS NOT NULL))",
          "with": {}
        }
      },
      "foreignKeys": {
        "users_tenant_id_fkey": {
          "name": "users_tenant_id_fkey",
          "tableFrom": "users",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "check_current_level": {
          "name": "check_current_level",
          "value": "(current_level IS NULL) OR ((current_level)::text = ANY ((ARRAY['A1'::character varying, 'A2'::character varying, 'B1'::character varying, 'B2'::character varying, 'C1'::character varying, 'C2'::character varying])::text[]))"
        },
        "check_initial_level": {
          "name": "check_initial_level",
          "value": "(initial_level IS NULL) OR ((initial_level)::text = ANY ((ARRAY['A1'::character varying, 'A2'::character varying, 'B1'::character varying, 'B2'::character varying, 'C1'::character varying, 'C2'::character varying])::text[]))"
        },
        "check_level_status": {
          "name": "check_level_status",
          "value": "(level_status IS NULL) OR ((level_status)::text = ANY ((ARRAY['confirmed'::character varying, 'provisional'::character varying, 'pending_approval'::character varying])::text[]))"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.tenants": {
      "name": "tenants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "subdomain": {
          "name": "subdomain",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_tenants_status": {
          "name": "idx_tenants_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tenants_subdomain": {
          "name": "idx_tenants_subdomain",
          "columns": [
            {
              "expression": "subdomain",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "tenants_subdomain_key": {
          "columns": [
            "subdomain"
          ],
          "nullsNotDistinct": false,
          "name": "tenants_subdomain_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.classes": {
      "name": "classes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "subject": {
          "name": "subject",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "capacity": {
          "name": "capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 20
        },
        "enrolled_count": {
          "name": "enrolled_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "teacher_id": {
          "name": "teacher_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "schedule_description": {
          "name": "schedule_description",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "start_date": {
          "name": "start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "end_date": {
          "name": "end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_classes_dates": {
          "name": "idx_classes_dates",
          "columns": [
            {
              "expression": "start_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "end_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_classes_status": {
          "name": "idx_classes_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_classes_teacher": {
          "name": "idx_classes_teacher",
          "columns": [
            {
              "expression": "teacher_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_classes_tenant": {
          "name": "idx_classes_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "classes_teacher_id_fkey": {
          "name": "classes_teacher_id_fkey",
          "tableFrom": "classes",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "teacher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "classes_tenant_id_fkey": {
          "name": "classes_tenant_id_fkey",
          "tableFrom": "classes",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.class_sessions": {
      "name": "class_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_id": {
          "name": "class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_date": {
          "name": "session_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "start_time": {
          "name": "start_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "end_time": {
          "name": "end_time",
          "type": "time",
          "primaryKey": false,
          "notNull": true
        },
        "topic": {
          "name": "topic",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'scheduled'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_sessions_class_date": {
          "name": "idx_sessions_class_date",
          "columns": [
            {
              "expression": "class_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "session_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "class_sessions_class_id_fkey": {
          "name": "class_sessions_class_id_fkey",
          "tableFrom": "class_sessions",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "class_sessions_tenant_id_fkey": {
          "name": "class_sessions_tenant_id_fkey",
          "tableFrom": "class_sessions",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.attendance": {
      "name": "attendance",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_session_id": {
          "name": "class_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_by": {
          "name": "recorded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recorded_at": {
          "name": "recorded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_attendance_session_student": {
          "name": "idx_attendance_session_student",
          "columns": [
            {
              "expression": "class_session_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "student_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "attendance_class_session_id_fkey": {
          "name": "attendance_class_session_id_fkey",
          "tableFrom": "attendance",
          "tableTo": "class_sessions",
          "schemaTo": "public",
          "columnsFrom": [
            "class_session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_recorded_by_fkey": {
          "name": "attendance_recorded_by_fkey",
          "tableFrom": "attendance",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "recorded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_student_id_fkey": {
          "name": "attendance_student_id_fkey",
          "tableFrom": "attendance",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "attendance_tenant_id_fkey": {
          "name": "attendance_tenant_id_fkey",
          "tableFrom": "attendance",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.assignments": {
      "name": "assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_id": {
          "name": "class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "assigned_date": {
          "name": "assigned_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "due_date": {
          "name": "due_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "max_score": {
          "name": "max_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "attachments": {
          "name": "attachments",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "assignments_class_id_fkey": {
          "name": "assignments_class_id_fkey",
          "tableFrom": "assignments",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "assignments_tenant_id_fkey": {
          "name": "assignments_tenant_id_fkey",
          "tableFrom": "assignments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.submissions": {
      "name": "submissions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "assignment_id": {
          "name": "assignment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "content": {
          "name": "content",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "attachments": {
          "name": "attachments",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'submitted'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "submissions_assignment_id_fkey": {
          "name": "submissions_assignment_id_fkey",
          "tableFrom": "submissions",
          "tableTo": "assignments",
          "schemaTo": "public",
          "columnsFrom": [
            "assignment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "submissions_student_id_fkey": {
          "name": "submissions_student_id_fkey",
          "tableFrom": "submissions",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "submissions_tenant_id_fkey": {
          "name": "submissions_tenant_id_fkey",
          "tableFrom": "submissions",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.enrollments": {
      "name": "enrollments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_id": {
          "name": "class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_date": {
          "name": "enrollment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "completion_date": {
          "name": "completion_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "attendance_rate": {
          "name": "attendance_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "current_grade": {
          "name": "current_grade",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expected_end_date": {
          "name": "expected_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "booked_weeks": {
          "name": "booked_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "original_course_id": {
          "name": "original_course_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "extensions_count": {
          "name": "extensions_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_amended": {
          "name": "is_amended",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_enrollments_student_class": {
          "name": "idx_enrollments_student_class",
          "columns": [
            {
              "expression": "student_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "class_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "enrollments_class_id_fkey": {
          "name": "enrollments_class_id_fkey",
          "tableFrom": "enrollments",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollments_original_course_id_fkey": {
          "name": "enrollments_original_course_id_fkey",
          "tableFrom": "enrollments",
          "tableTo": "courses",
          "schemaTo": "public",
          "columnsFrom": [
            "original_course_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollments_student_id_fkey": {
          "name": "enrollments_student_id_fkey",
          "tableFrom": "enrollments",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "student_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollments_tenant_id_fkey": {
          "name": "enrollments_tenant_id_fkey",
          "tableFrom": "enrollments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.grades": {
      "name": "grades",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "submission_id": {
          "name": "submission_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "grade": {
          "name": "grade",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "feedback": {
          "name": "feedback",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "graded_by": {
          "name": "graded_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "graded_at": {
          "name": "graded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "grades_graded_by_fkey": {
          "name": "grades_graded_by_fkey",
          "tableFrom": "grades",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "graded_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "grades_submission_id_fkey": {
          "name": "grades_submission_id_fkey",
          "tableFrom": "grades",
          "tableTo": "submissions",
          "schemaTo": "public",
          "columnsFrom": [
            "submission_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "grades_tenant_id_fkey": {
          "name": "grades_tenant_id_fkey",
          "tableFrom": "grades",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "grades_submission_id_key": {
          "columns": [
            "submission_id"
          ],
          "nullsNotDistinct": false,
          "name": "grades_submission_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.enrollment_amendments": {
      "name": "enrollment_amendments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_id": {
          "name": "enrollment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amendment_type": {
          "name": "amendment_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "amendment_date": {
          "name": "amendment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "previous_end_date": {
          "name": "previous_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "previous_weeks": {
          "name": "previous_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "previous_class_id": {
          "name": "previous_class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "new_end_date": {
          "name": "new_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "new_weeks": {
          "name": "new_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_class_id": {
          "name": "new_class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "fee_adjustment": {
          "name": "fee_adjustment",
          "type": "numeric(10, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requested_by": {
          "name": "requested_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_enrollment_amendments_date": {
          "name": "idx_enrollment_amendments_date",
          "columns": [
            {
              "expression": "amendment_date",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_enrollment_amendments_enrollment": {
          "name": "idx_enrollment_amendments_enrollment",
          "columns": [
            {
              "expression": "enrollment_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_enrollment_amendments_status": {
          "name": "idx_enrollment_amendments_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_enrollment_amendments_tenant": {
          "name": "idx_enrollment_amendments_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_enrollment_amendments_type": {
          "name": "idx_enrollment_amendments_type",
          "columns": [
            {
              "expression": "amendment_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "enrollment_amendments_approved_by_fkey": {
          "name": "enrollment_amendments_approved_by_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollment_amendments_enrollment_id_fkey": {
          "name": "enrollment_amendments_enrollment_id_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "enrollments",
          "schemaTo": "public",
          "columnsFrom": [
            "enrollment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "enrollment_amendments_new_class_id_fkey": {
          "name": "enrollment_amendments_new_class_id_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "new_class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollment_amendments_previous_class_id_fkey": {
          "name": "enrollment_amendments_previous_class_id_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "previous_class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollment_amendments_requested_by_fkey": {
          "name": "enrollment_amendments_requested_by_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "requested_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "enrollment_amendments_tenant_id_fkey": {
          "name": "enrollment_amendments_tenant_id_fkey",
          "tableFrom": "enrollment_amendments",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "check_amendment_type": {
          "name": "check_amendment_type",
          "value": "(amendment_type)::text = ANY ((ARRAY['extension'::character varying, 'reduction'::character varying, 'transfer'::character varying, 'level_change'::character varying, 'cancellation'::character varying])::text[])"
        }
      },
      "policies": {
        "enrollment_amendments_insert_admin": {
          "name": "enrollment_amendments_insert_admin",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "((tenant_id = (current_setting('app.current_tenant_id'::text))::uuid) AND (current_setting('app.current_user_role'::text) = ANY (ARRAY['admin'::text, 'super_admin'::text])))"
        },
        "enrollment_amendments_select_admin": {
          "name": "enrollment_amendments_select_admin",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "enrollment_amendments_select_student": {
          "name": "enrollment_amendments_select_student",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "enrollment_amendments_update_admin": {
          "name": "enrollment_amendments_update_admin",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.cefr_descriptors": {
      "name": "cefr_descriptors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "level": {
          "name": "level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "subcategory": {
          "name": "subcategory",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "descriptor": {
          "name": "descriptor",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_cefr_category": {
          "name": "idx_cefr_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cefr_level": {
          "name": "idx_cefr_level",
          "columns": [
            {
              "expression": "level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.lesson_plans": {
      "name": "lesson_plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "teacher_id": {
          "name": "teacher_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "class_id": {
          "name": "class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "cefr_level": {
          "name": "cefr_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "skill": {
          "name": "skill",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "duration_minutes": {
          "name": "duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_lesson_plans_cefr": {
          "name": "idx_lesson_plans_cefr",
          "columns": [
            {
              "expression": "cefr_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lesson_plans_class": {
          "name": "idx_lesson_plans_class",
          "columns": [
            {
              "expression": "class_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_lesson_plans_teacher": {
          "name": "idx_lesson_plans_teacher",
          "columns": [
            {
              "expression": "teacher_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "lesson_plans_class_id_fkey": {
          "name": "lesson_plans_class_id_fkey",
          "tableFrom": "lesson_plans",
          "tableTo": "classes",
          "schemaTo": "public",
          "columnsFrom": [
            "class_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "lesson_plans_teacher_id_fkey": {
          "name": "lesson_plans_teacher_id_fkey",
          "tableFrom": "lesson_plans",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "teacher_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "lesson_plans_tenant_id_fkey": {
          "name": "lesson_plans_tenant_id_fkey",
          "tableFrom": "lesson_plans",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.audit_log": {
      "name": "audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "resource_type": {
          "name": "resource_type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "resource_id": {
          "name": "resource_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "varchar(45)",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_audit_created": {
          "name": "idx_audit_created",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_tenant": {
          "name": "idx_audit_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_user": {
          "name": "idx_audit_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "audit_log_tenant_id_fkey": {
          "name": "audit_log_tenant_id_fkey",
          "tableFrom": "audit_log",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "audit_log_user_id_fkey": {
          "name": "audit_log_user_id_fkey",
          "tableFrom": "audit_log",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.feedback": {
      "name": "feedback",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'new'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_feedback_status": {
          "name": "idx_feedback_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_feedback_tenant": {
          "name": "idx_feedback_tenant",
          "columns": [
            {
              "expression": "tenant_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "feedback_tenant_id_fkey": {
          "name": "feedback_tenant_id_fkey",
          "tableFrom": "feedback",
          "tableTo": "tenants",
          "schemaTo": "public",
          "columnsFrom": [
            "tenant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "feedback_user_id_fkey": {
          "name": "feedback_user_id_fkey",
          "tableFrom": "feedback",
          "tableTo": "users",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.attendance_status": {
      "name": "attendance_status",
      "values": [
        "present",
        "absent",
        "late",
        "excused"
      ],
      "schema": "public"
    },
    "public.payment_method": {
      "name": "payment_method",
      "values": [
        "cash",
        "card",
        "bank_transfer",
        "online",
        "other"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.v_students_with_metadata": {
      "name": "v_students_with_metadata",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "current_level": {
          "name": "current_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "initial_level": {
          "name": "initial_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "level_status": {
          "name": "level_status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_type": {
          "name": "visa_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_expiry": {
          "name": "visa_expiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_login": {
          "name": "last_login",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "active_enrollments": {
          "name": "active_enrollments",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "completed_enrollments": {
          "name": "completed_enrollments",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_enrollments": {
          "name": "total_enrollments",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "attendance_present": {
          "name": "attendance_present",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "attendance_total": {
          "name": "attendance_total",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "attendance_rate": {
          "name": "attendance_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "last_enrollment_date": {
          "name": "last_enrollment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "last_attendance_date": {
          "name": "last_attendance_date",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "visa_expiring_soon": {
          "name": "visa_expiring_soon",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "visa_expired": {
          "name": "visa_expired",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "at_risk_attendance": {
          "name": "at_risk_attendance",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT u.id, u.tenant_id, u.email, u.name, u.avatar_url, u.current_level, u.initial_level, u.level_status, u.visa_type, u.visa_expiry, u.metadata, u.created_at, u.updated_at, u.last_login, count(DISTINCT e.id) FILTER (WHERE e.status::text = 'active'::text) AS active_enrollments, count(DISTINCT e.id) FILTER (WHERE e.status::text = 'completed'::text) AS completed_enrollments, count(DISTINCT e.id) AS total_enrollments, count(DISTINCT a.id) FILTER (WHERE a.status::text = 'present'::text) AS attendance_present, count(DISTINCT a.id) AS attendance_total, CASE WHEN count(DISTINCT a.id) > 0 THEN round(count(DISTINCT a.id) FILTER (WHERE a.status::text = 'present'::text)::numeric / count(DISTINCT a.id)::numeric * 100::numeric, 2) ELSE NULL::numeric END AS attendance_rate, max(e.enrollment_date) AS last_enrollment_date, max(cs.start_time) FILTER (WHERE a.status::text = 'present'::text) AS last_attendance_date, CASE WHEN u.visa_expiry IS NOT NULL AND u.visa_expiry < (CURRENT_DATE + '30 days'::interval) THEN true ELSE false END AS visa_expiring_soon, CASE WHEN u.visa_expiry IS NOT NULL AND u.visa_expiry < CURRENT_DATE THEN true ELSE false END AS visa_expired, CASE WHEN count(DISTINCT a.id) > 0 AND (count(DISTINCT a.id) FILTER (WHERE a.status::text = 'present'::text)::numeric / count(DISTINCT a.id)::numeric) < 0.75 THEN true ELSE false END AS at_risk_attendance FROM users u LEFT JOIN enrollments e ON e.student_id = u.id LEFT JOIN attendance a ON a.student_id = u.id LEFT JOIN class_sessions cs ON cs.id = a.class_session_id WHERE u.role::text = 'student'::text GROUP BY u.id ORDER BY u.created_at DESC",
      "materialized": false
    },
    "public.v_student_registry": {
      "name": "v_student_registry",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "tenant_id": {
          "name": "tenant_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "current_level": {
          "name": "current_level",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_type": {
          "name": "visa_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "visa_expiry": {
          "name": "visa_expiry",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "active_enrollments": {
          "name": "active_enrollments",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "attendance_rate": {
          "name": "attendance_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "visa_status": {
          "name": "visa_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT u.id, u.tenant_id, u.email, u.name, u.avatar_url, u.current_level, u.visa_type, u.visa_expiry, u.created_at, count(DISTINCT e.id) FILTER (WHERE e.status::text = 'active'::text) AS active_enrollments, CASE WHEN count(DISTINCT a.id) > 0 THEN round(count(DISTINCT a.id) FILTER (WHERE a.status::text = 'present'::text)::numeric / count(DISTINCT a.id)::numeric * 100::numeric, 2) ELSE NULL::numeric END AS attendance_rate, CASE WHEN u.visa_expiry IS NOT NULL AND u.visa_expiry < CURRENT_DATE THEN 'expired'::text WHEN u.visa_expiry IS NOT NULL AND u.visa_expiry < (CURRENT_DATE + '30 days'::interval) THEN 'expiring_soon'::text ELSE 'valid'::text END AS visa_status FROM users u LEFT JOIN enrollments e ON e.student_id = u.id LEFT JOIN attendance a ON a.student_id = u.id WHERE u.role::text = 'student'::text GROUP BY u.id ORDER BY u.created_at DESC",
      "materialized": false
    },
    "public.v_student_course_history": {
      "name": "v_student_course_history",
      "schema": "public",
      "columns": {
        "student_id": {
          "name": "student_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "student_name": {
          "name": "student_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "student_email": {
          "name": "student_email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "enrollment_id": {
          "name": "enrollment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "enrollment_date": {
          "name": "enrollment_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "completion_date": {
          "name": "completion_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "enrollment_status": {
          "name": "enrollment_status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "class_id": {
          "name": "class_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "class_name": {
          "name": "class_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "class_level": {
          "name": "class_level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "class_start_date": {
          "name": "class_start_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "class_end_date": {
          "name": "class_end_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "attendance_rate": {
          "name": "attendance_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "current_grade": {
          "name": "current_grade",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT u.id AS student_id, u.name AS student_name, u.email AS student_email, e.id AS enrollment_id, e.enrollment_date, e.completion_date, e.status AS enrollment_status, c.id AS class_id, c.name AS class_name, c.level AS class_level, c.start_date AS class_start_date, c.end_date AS class_end_date, e.attendance_rate, e.current_grade FROM users u JOIN enrollments e ON e.student_id = u.id JOIN classes c ON c.id = e.class_id WHERE u.role::text = 'student'::text AND c.deleted_at IS NULL ORDER BY u.name, e.enrollment_date DESC",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {}
  }
}