#!/usr/bin/env bash
# Admin MCP Server - HTTP Transport Launcher
#
# Launches the Admin MCP server in HTTP mode for web/API access.
# Listens on the specified port (default: 3000) for JSON-RPC requests.
#
# Usage:
#   admin-mcp-http              # Start on default port 3000
#   PORT=8080 admin-mcp-http    # Start on custom port
#
# Environment variables:
#   PORT                      - HTTP server port (default: 3000)
#   HOST                      - HTTP server host (default: 0.0.0.0)
#   JWKS_URI                  - JWT verification endpoint (required)
#   JWT_AUDIENCE              - Expected JWT audience (default: admin-mcp)
#   SUPABASE_URL              - Supabase project URL (required)
#   SUPABASE_SERVICE_ROLE_KEY - Supabase service role key (required)

# Get the directory containing this script
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
PROJECT_ROOT="$( cd "$SCRIPT_DIR/.." && pwd )"

# Run the compiled TypeScript entry point
exec node "$PROJECT_ROOT/dist/index.js" http
